<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sist.web.mapper.JejuMapper">
	<select id="jejuListData" resultType="com.sist.web.vo.JejuVO" parameterType="hashmap">
		SELECT no,contentid,title,address,image1,hit,contenttype
		FROM jejutravel
		WHERE contenttype=#{contenttype}
		ORDER BY no ASC
		OFFSET #{start} ROWS FETCH NEXT 12 ROWS ONLY
	</select>
	
	<resultMap type="com.sist.web.vo.JejuVO" id="attMap">
		<result property="avo.infocenter" column="infocenter"/>
		<result property="avo.restdate" column="restdate"/>
		<result property="avo.usetime" column="usetime"/>
		<result property="avo.parking" column="parking"/>
		<result property="avo.msg" column="msg"/>
	</resultMap>
	
	<select id="jejuAttractionDetailData" resultMap="attMap" parameterType="int">
		SELECT j.no,title,image1,address,x,y,infocenter,restdate,usetime,parking,msg
		FROM jejutravel j JOIN attraction a
		ON j.contentid=a.contentid
		AND j.contentid=#{contentid}
	</select>
	
	<update id="jejuHitIncrement" parameterType="int">
		UPDATE jejutravel SET
		hit=hit+1
		WHERE contentid=#{contentid}
	</update>
</mapper>